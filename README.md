## [REST API](http://localhost:8080/doc)

## Концепция:

- Spring Modulith
    - [Spring Modulith: достигли ли мы зрелости модульности](https://habr.com/ru/post/701984/)
    - [Introducing Spring Modulith](https://spring.io/blog/2022/10/21/introducing-spring-modulith)
    - [Spring Modulith - Reference documentation](https://docs.spring.io/spring-modulith/docs/current-SNAPSHOT/reference/html/)

```
  url: jdbc:postgresql://localhost:5432/jira
  username: jira
  password: JiraRush
```

- Есть 2 общие таблицы, на которых не fk
    - _Reference_ - справочник. Связь делаем по _code_ (по id нельзя, тк id привязано к окружению-конкретной базе)
    - _UserBelong_ - привязка юзеров с типом (owner, lead, ...) к объекту (таска, проект, спринт, ...). FK вручную будем
      проверять

## Аналоги

- https://java-source.net/open-source/issue-trackers

## Тестирование

- https://habr.com/ru/articles/259055/

Список выполненных задач:
1. Разобраться со структурой проекта (onboarding).
2. Удалить социальные сети: vk, yandex.
3. Вынести всякую чувствительную информацию в отдельный property файл.
4. Переделать тесты так, чтоб во время тестов использовалась in memory БД (H2), а не PostgreSQL.
 - Сделал на Testcontainers, ибо пересаживание на H2 больше похоже на пытку: ничего не запускается, исправляешь одну ошибку - вылезает десяток других.
5. Написать тесты для всех публичных методов контроллера ProfileRestController. Хоть методов только 2, но тестовых методов должно быть больше, 
т.к. нужно проверить success and unsuccess path.
6. Сделать рефакторинг метода com.javarush.jira.bugtracking.attachment.FileUtil#upload чтоб он использовал современный подход для работы с файловой системой.
 - Просто на NIO нужно было переписать?)
7. Добавить новый функционал: добавления тегов к задаче (REST API + реализация на сервисе). Фронт делать необязательно. Таблица task_tag уже создана.
 - Простенький метод на уровне сервисов, задача которого добавлять в Set тэгов новые вараргами. Перетащил на контроллер для проверки работы.
8. Добавить подсчет времени сколько задача находилась в работе и тестировании. Написать 2 метода на уровне сервиса, которые параметром принимают задачу и возвращают затраченное время.
 - Тоже два метода на уровне сервиса и парочка на контроллер для проверки.
9. Написать Dockerfile для основного сервера
10. Написать docker-compose файл для запуска контейнера сервера вместе с БД и nginx. Для nginx используй конфиг-файл config/nginx.conf. При необходимости файл конфига можно редактировать.
 - 4 дня. И примерно 40 раз был переписан и Dockerfile и docker-compose - контейнер с приложением запускался и падал через 10 секунд без ошибок. Ошибка была в HandlerExceptionResolver - нашел логи в Docker.
11. Добавить локализацию минимум на двух языках для шаблонов писем (mails) и стартовой страницы index.html.
12. -

